<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Setting up ACI.">

    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <title>ACI setup - Contiv</title>

    <link href="/assets/stylesheets/application-929716ce.css" rel="stylesheet"/>

    <!--[if lt IE 9]><script src="/assets/javascripts/html5shiv-8b3747c5.js"></script><script src="/assets/javascripts/respond.min-88c91176.js"></script><![endif]-->

    
  </head>

  <body id="page-ACI setup" class=" page-ACI setup layout-install page-sub">

<div id="header" class="navbar-static-top">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <div class="navbar-header">
          <div class="navbar-brand">
            <a class="logo" href="/">Contiv</a>
          </div>
          <button class="navbar-toggle" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="buttons hidden-xs">
          <nav role="navigation">
            <ul class="main-links nav navbar-nav navbar-left">
              <li class="first li-under"><a href="/install/index.html">Getting Started</a></li>
              <li class="li-under"><a href="http://docs.contiv.io/">Docs</a></li>
            </ul>
            <ul class="external-links nav navbar-nav navbar-left">
              <li class="github">
                <a href="https://github.com/contiv">GitHub</a>
              </li>
            </ul>
            <ul class="external-links nav navbar-nav navbar-left">
              <li>
                <a href="https://twitter.com/projectcontiv"><i class="fa fa-twitter"></i></a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="sidebar-overlay"></div>


<aside id="sidebar" class="sidebar sidebar-default sidebar-fixed-right" role="navigation">
    
    <div class="sidebar-header header-cover">
        
        <div class="sidebar-image">
            <img src="/assets/images/logo-header@2x.png" width="49px" height="56px">
        </div>
    </div>

    
    <ul class="main nav sidebar-nav">
        <li class="first"><a href="/intro/index.html">Intro</a></li>
        <li class=""><a href="/docs/index.html">Docs</a></li>
    </ul>
    <div class="divider"></div>
    
    <ul class="external nav sidebar-nav">
        <li class=""><a class="v-btn gray sml" href="https://github.com/contiv"><svg id="svg-download" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" style="enable-background:new 0 0 14 14;">
  <style>
  </style>
  <path class="" d="M13,0H1C0.5,0,0,0.5,0,1v12c0,0.5,0.5,1,1,1h4.7c0,0,0,0,0-0.1c0-0.2,0-0.6,0-1.1c-1.8,0.4-2.2-0.9-2.2-0.9
    c-0.3-0.8-0.7-1-0.7-1c-0.6-0.4,0-0.4,0-0.4c0.7,0,1,0.7,1,0.7c0.6,1,1.5,0.7,1.9,0.5c0.1-0.4,0.2-0.7,0.4-0.9c-1.5-0.2-3-0.7-3-3.2
    c0-0.7,0.3-1.3,0.7-1.8C3.7,5.8,3.5,5.1,3.9,4.2c0,0,0.6-0.2,1.8,0.7c0.5-0.1,1.1-0.2,1.6-0.2c0.6,0,1.1,0.1,1.6,0.2
    c1.3-0.8,1.8-0.7,1.8-0.7c0.4,0.9,0.1,1.6,0.1,1.7c0.4,0.5,0.7,1,0.7,1.8c0,2.5-1.5,3.1-3,3.2C8.7,11.1,9,11.5,9,12.1
    c0,0.9,0,1.6,0,1.8c0,0,0,0,0,0.1h4c0.5,0,1-0.5,1-1V1C14,0.5,13.5,0,13,0z"/>
</svg>
GitHub</a></li>
    </ul>
</aside>


<div class="container">
	<div class="row">
		<div class="col-md-3 col-sm-3 col-xs-12">
					<div class="docs-sidebar hidden-print affix-top" role="complementary">
			<ul class="nav docs-sidenav">
				<li>
					<a href="/install/index.html">Getting Started</a>
				</li>

				<li class="active">
					<a href="/install/netplugin/vagrant.html">Netplugin</a>
					<ul class="nav nav-visible">
						<li>
							<a href="/install/netplugin/vagrant.html">Vagrant Setup</a>
						</li>
						<li>
							<a href="/install/netplugin/install.html">Installing Netplugin</a>
						</li>
						<li class="active">
							<a href="/install/netplugin/aci.html">ACI setup</a>
						</li>
						<li>
							<a href="/install/netplugin/k8s.html">Kubernetes cluster</a>
						</li>
						<li>
							<a href="/install/netplugin/bgp.html">BGP L3 setup</a>
                        </li>

						<li>
							<a href="/install/netplugin/mcast.html">Multicast</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>

		</div>  
		<div id="main-content" class="col-sm-9 col-md-9 col-xs-12" role="main">
			<div class="bs-docs-section">
				
	<h2>DIY Guide to setup Contiv Networking in ACI setup</h2>
<p>This document mentions the steps/pre-requisites required to setup the cluster in ACI mode. Note that the steps listed here are in addition to the steps mentioned in the <a href="https://github.com/contiv/demo/tree/master/net/README.md">general README</a>.</p>

<h3>Pre-requisites for ACI setup</h3>

<h4>VLANS</h4>
<p>Contiv currently uses vlans starting from 100. Please make sure that a block of vlans starting from 100 are
 reserved for use by Contiv. This will be made configurable in a subsequent release.</p>

<h4>APIC Configuration (Fabric/Access Policies)</h4>
<pre class="highlight plaintext"><code>1. Create a physical domain named "allvlans" (For now, this name is hard-coded. This will be made configurable/generic in
   a follow on release.).

2. Create a vlan pool with a block of vlans starting with 100 as described above. Set allocation mode to "Static Allocation"
   and associate with the "allvlans" physical domain.

3. Create an Attachable Access Entity Profile(AAEP) and associate with the "allvlans" physical domain.

4. Create a Policy Group (under Interface Policies) and specify the AAEP created in the previous step.

5. Create an Interface Profile and specify the physical interfaces connected from your ToR(s) to the bare metal servers.
   You can create separate Interface Profiles for individual ToRs if you like.

6. Create a Switch Profile (Switch Policies/Profiles) and specify the appropriate interface profile created in step 4.

7. Make a note of the full node name of the ToRs you have connected to your servers.

8. Find the interface name of the NIC on the server that is connected to the ToR (e.g. eth5).
</code></pre>

<h3>Additional information in the cfg.yml</h3>
<p>Sample cfg.yml for ACI setup: <a href="https://github.com/contiv/demo/tree/master/net/extras/sample_aci_cfg.yml">sample_aci_cfg.yml</a></p>
<p>Apart from providing the usual information in the cfg.yml (as described <a href="https://github.com/contiv/demo/tree/master/net/README.md#information-in-cfgyml">here</a>), the following additional details are required to provide access information to the APIC and the leaf(s) connected to the ACI topology.</p>

<h5>ACI setup Info</h5>
<p>All options listed below for ACI setup are mandatory.</p>

<h6>General APIC reachability information</h6>
<pre class="highlight plaintext"><code>      APIC_URL: "https://&lt;apic-server-url&gt;:443"
      APIC_USERNAME: "admin"
      APIC_PASSWORD: "password"
</code></pre>

<h6>Information related to leaf nodes</h6>
<p>Full path of the leaf nodes connected to your servers. Use the informtion obtained in Step 8 of <a href="aci.md#apic-configuration-fabricaccess-policies">APIC Configuration</a> here.</p>
<pre class="highlight plaintext"><code>    APIC_LEAF_NODES:
    - topology/pod-1/node-101
    - topology/pod-1/node-102
</code></pre>

<h3>Running the installer in ACI mode</h3>
<p>To run the installer in ACI mode use the -a option</p>
<pre class="highlight plaintext"><code>      ./net_demo_isntaller -a
</code></pre>
<p>To restart the services once installed use the -r option. This ensures that the services are restarted in a clean state.</p>
<pre class="highlight plaintext"><code>      ./net_demo_isntaller -ar
</code></pre>

<h3>NOTE</h3>
<p>The installer script downloads some basic containers (web/redis) to get you going</p>


			</div>
		</div>
	</div>
</div>


<div id="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-6 col-xs-12">
        <ul class="footer-links nav navbar-nav">
          <li><a href="/install/index.html">Getting Started</a></li>
          <li><a href="http://docs.contiv.io/">Docs</a></li>
          <li><a href="https://github.com/contiv">GitHub</a></li>
        </ul>
      </div>
      <div class="footer-contiv col-sm-6 col-xs-12">
        <div class="pull-right">
          <a class="contiv-project" href="https://contiv.io">
              Contiv
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

</body>
</html>